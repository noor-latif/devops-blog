{"version":3,"sources":["webpack:///../src/calc.ts","webpack:///../src/common.ts","webpack:///../src/constants.ts","webpack:///../src/index.ts","webpack:///../src/observables.ts","webpack:///../src/styles.ts","webpack:///../src/update.ts","webpack:///../src/directives/class-map.ts","webpack:///../src/directives/style-map.ts"],"names":["min","Math","bind","max","CalcMixin","_classCallCheck","_createClass","key","value","calcIsInRange","_ref","opened","clientX","side","_this$range","_slicedToArray","range","lower","upper","window","innerWidth","Error","calcIsSwipe","_ref2","_ref3","translateX","drawerWidth","_","startX","endX","calcWillOpen","__","velocity","VELOCITY_THRESHOLD","calcTranslateX","_ref4","_ref5","startTranslateX","moveX","deltaX","easeOutSine","t","b","c","d","sin","PI","observeWidth","el","resize$","createResizeObservable","of","contentRect","width","clientWidth","pipe","map","rangeConverter","fromAttribute","attr","replace","split","Number","toAttribute","join","rangeHasChanged","curr","prev","arguments","length","undefined","some","v","i","BASE_DURATION","WIDTH_CONTRIBUTION","HyDrawer","_applyMixins","_this","persistent","threshold","noScroll","mouseEvents","willChange","_HyDrawer_initialized","set","createResolvablePromise","_HyDrawer_translateX$","_HyDrawer_startTranslateX$","_HyDrawer_tweenTranslateX$","upgrade","drawerWidth$","getDrawerWidth","active$","$","start$","getStartObservable","filterWhen","share","isScrimVisible$","defer","__classPrivateFieldGet","isInRange$","withLatestFrom","args","_this2","apply","_toConsumableArray","tap","inRange","fireEvent","end$","getEndObservable","grabbing","move$","getMoveObservable","isSliding$","getIsSlidingObservable","isSliding","translateX$","__classPrivateFieldSet","jumpTranslateX$","combineLatest","moveTranslateX$","scrimClickable","event","preventDefault","_this3","merge","sample","velocity$","timestamp","pairwise","filter","prevTime","time","_ref6","_ref7","_ref7$","prevX","_ref7$2","x","startWith","willOpen$","_this4","_this5","animateTo$","switchMap","_ref8","_ref9","willOpen","inv","endTranslateX","diffTranslateX","duration","ceil","tween","finalize","transitioned","takeUntil","skip","_this6","updateDOM","_this7","opacity","detail","bubbles","subscribe","fromEvent","scrimEl","close","active","style","display","NEVER","_ref10","_ref11","coord","isInRange","_ref12","_ref13","resolve","hasOpened","_inherits","get","_this8","content$","contentEl","px","peek$","peekEl","_ref14","_ref15","contentWidth","peekWidth","connectedCallback","_superPropGet","BehaviorSubject","Subject","updater","DOMUpdater","getUpdaterForPlatform","updateComplete","then","render","html","_templateObject","_taggedTemplateLiteral","styleMap","pointerEvents","_templateObject2","classMap","_defineProperty","wrapper","open","next","toggle","applyMixins","RxLitElement","ObservablesMixin","UpdateMixin","styles","__decorate","query","property","type","Boolean","reflect","String","converter","hasChanged","customElement","abs","touchstart$","document","passive","touches","mousedown$","e","touchmove$","mousemove$","subscribeWhen","mapTo","touchend$","changedTouches","mouseup$","getIsSlidingObservableInner","take","repeatWhen","skipWhile","_ref11$","clientY","_ref11$2","startY","_ref13$","_ref13$2","_ref15$","_ref15$2","css","parent","hasCSSOM","Element","prototype","CSS","AttributeStyleMapUpdater","StyleUpdater","_DOMUpdater","_callSuper","transform","concat","_DOMUpdater2","tvalue","CSSTransformValue","CSSTranslate","ovalue","number","attributeStyleMap","ClassList","element","classes","Set","changed","classList","getAttribute","_iterator","_createForOfIteratorHelper","_step","s","n","done","cls","add","err","f","remove","delete","commit","classString","forEach","setAttribute","previousClassesCache","WeakMap","directive","classInfo","part","AttributePart","PropertyPart","committer","name","parts","previousClasses","strings","has","previousStylePropertyCache","styleInfo","previousStyleProperties","cssText","indexOf","removeProperty","setProperty"],"mappings":"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","file":"LEGACY-vendors~drawer-hydejack-9.2.1.js","sourcesContent":["import { VELOCITY_THRESHOLD } from \"./constants\";\n\nimport { Coord } from './observables';\n\n// Using shorthands for common functions\nconst min = Math.min.bind(Math);\nconst max = Math.max.bind(Math);\n\nexport class CalcMixin {\n  side!: 'left' | 'right';\n  range!: [number, number];\n\n  calcIsInRange({ clientX }: Coord, opened: boolean) {\n    // console.log(this.range, this.align);\n    switch (this.side) {\n      case \"left\": {\n        const [lower, upper] = this.range;\n        return clientX > lower && (opened || clientX < upper);\n      }\n      case \"right\": {\n        const upper = window.innerWidth - this.range[0];\n        const lower = window.innerWidth - this.range[1];\n        return clientX < upper && (opened || clientX > lower);\n      }\n      default:\n        throw Error();\n    }\n  }\n\n  calcIsSwipe({ clientX: startX }: Coord, { clientX: endX }: Coord, translateX: number, drawerWidth: number, _: number): boolean {\n    return endX !== startX || (translateX > 0 && translateX < drawerWidth);\n  }\n\n  calcWillOpen(_: {}, __: {}, translateX: number, drawerWidth: number, velocity: number): boolean {\n    switch (this.side) {\n      case \"left\": {\n        if (velocity > VELOCITY_THRESHOLD) return true;\n        else if (velocity < -VELOCITY_THRESHOLD) return false;\n        else if (translateX >= drawerWidth / 2) return true;\n        else return false;\n      }\n      case \"right\": {\n        if (-velocity > VELOCITY_THRESHOLD) return true;\n        else if (-velocity < -VELOCITY_THRESHOLD) return false;\n        else if (translateX <= -drawerWidth / 2) return true;\n        else return false;\n      }\n      default:\n        throw Error();\n    }\n  }\n\n  calcTranslateX({ clientX: moveX }: Coord, { clientX: startX }: Coord, startTranslateX: number, drawerWidth: number): number {\n    switch (this.side) {\n      case \"left\": {\n        const deltaX = moveX - startX;\n        const translateX = startTranslateX + deltaX;\n        return max(0, min(drawerWidth, translateX));\n      }\n      case \"right\": {\n        const deltaX = moveX - startX;\n        const translateX = startTranslateX + deltaX;\n        return min(0, max(-drawerWidth, translateX));\n      }\n      default:\n        throw Error();\n    }\n  }\n};","import { of } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport { createResizeObservable } from '@hydecorp/component';\nimport { ComplexAttributeConverter } from \"lit-element\";\n\nexport { applyMixins, subscribeWhen, filterWhen, tween } from '@hydecorp/component';\n\nexport function easeOutSine(t: number, b: number, c: number, d: number) {\n  return c * Math.sin((t / d) * (Math.PI / 2)) + b;\n}\n\nexport function observeWidth(el: HTMLElement) {\n  // This component should have at least basic support without `ResizeObserver` support,\n  // so we pass a one-time measurement when it's missing. Obviously this won't update, so BYO polyfill.\n  const resize$ = \"ResizeObserver\" in window\n    ? createResizeObservable(el)\n    : of({ contentRect: { width: el.clientWidth }});\n  return resize$.pipe(map(({ contentRect: { width } }) => width));\n}\n\nexport const rangeConverter: ComplexAttributeConverter<number[]> = {\n  fromAttribute(attr) {\n    return (attr ?? '').replace(/[\\[\\]]/g, '')\n      .split(',')\n      .map(Number);\n  },\n\n  toAttribute(range) {\n    return range.join(',');\n  },\n};\n\nexport function rangeHasChanged(curr: number[], prev: number[] = []) {\n  return curr.length !== prev.length || curr.some((v, i) => v !== prev[i]);\n}\n","// The base duration of the fling animation.\nexport const BASE_DURATION = 200;\n\n// We adjust the duration of the animation using the width of the drawer.\n// There is no physics to this, but we know from testing that the animation starts to feel bad\n// when the drawer increases in size.\n// From testing we know that, if we increase the duration as a fraction of the drawer width,\n// the animation stays smooth across common display sizes.\nexport const WIDTH_CONTRIBUTION = 0.15;\n\n// Minimum velocity of the drawer (in px/ms) when releasing to make it fling to opened/closed state.\nexport const VELOCITY_THRESHOLD = 0.15;\n","/** \n * Copyright (c) 2020 Florian Klampfer <https://qwtel.com/>\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n * \n * @license \n * @nocompile\n */\nimport { html, property, customElement, query } from 'lit-element';\nimport { classMap } from 'lit-html/directives/class-map';\nimport { styleMap } from 'lit-html/directives/style-map';\n\nimport { Observable, Subject, BehaviorSubject, combineLatest, merge, NEVER, defer, fromEvent } from \"rxjs\";\nimport { startWith, takeUntil, map, share, withLatestFrom, tap, sample, timestamp, pairwise, filter, switchMap, skip, finalize } from 'rxjs/operators';\n\nimport { RxLitElement, createResolvablePromise } from '@hydecorp/component';\n\nimport { BASE_DURATION, WIDTH_CONTRIBUTION } from './constants';\nimport { applyMixins, filterWhen, easeOutSine, observeWidth, rangeConverter, rangeHasChanged, tween } from './common';\nimport { ObservablesMixin, Coord } from './observables';\nimport { CalcMixin } from './calc';\nimport { UpdateMixin, DOMUpdater } from './update';\nimport { styles } from './styles';\n\n@customElement('hy-drawer')\nexport class HyDrawer \n    extends applyMixins(RxLitElement, [ObservablesMixin, UpdateMixin, CalcMixin])\n    implements ObservablesMixin, UpdateMixin, CalcMixin {\n\n  static styles = styles;\n\n  @query('.scrim') scrimEl!: HTMLElement;\n  @query('.wrapper') contentEl!: HTMLElement;\n  @query('.peek') peekEl!: HTMLElement;\n\n  @property({ type: Boolean, reflect: true }) opened: boolean = false;\n  @property({ type: String, reflect: true }) side: \"left\" | \"right\" = \"left\";\n  @property({ type: Boolean, reflect: true }) persistent: boolean = false;\n  @property({ type: Number, reflect: true }) threshold: number = 10;\n  @property({ type: Boolean, reflect: true }) noScroll: boolean = false;\n  @property({ type: Boolean, reflect: true }) mouseEvents: boolean = false;\n  // @property({ type: Boolean, reflect: true }) hashChange: boolean = false;\n  @property({ reflect: true, converter: rangeConverter, hasChanged: rangeHasChanged }) range: [number, number] = [0, 100];\n\n  // State\n  @property() scrimClickable!: boolean;\n  @property() grabbing!: boolean;\n  @property() willChange: boolean = false;\n\n  #initialized = createResolvablePromise();\n  get initialized() {\n    return this.#initialized;\n  }\n \n  // get histId() { return this.id || this.tagName; }\n  // get hashId() { return `#${this.histId}--opened`; }\n\n  translateX!: number;\n  opacity!: number;\n  isSliding!: boolean;\n\n  $!: {\n    opened: Subject<boolean>;\n    side: Subject<\"left\" | \"right\">;\n    persistent: Subject<boolean>;\n    preventDefault: Subject<boolean>;\n    mouseEvents: Subject<boolean>;\n    // hashChange: Subject<boolean>;\n  };\n\n  animateTo$!: Subject<boolean>;\n\n  // TODO: Prefer composition to mixins...\n  // ObservablesMixin\n  getStartObservable!: () => Observable<Coord>;\n  getMoveObservable!: (start: Observable<Coord>, end: Observable<Coord>) => Observable<Coord>;\n  getEndObservable!: () => Observable<Coord>;\n  getIsSlidingObservable!: (move: Observable<Coord>, start: Observable<Coord>, end: Observable<Coord>) => Observable<boolean>;\n  getIsSlidingObservableInner!: (move: Observable<Coord>, start: Observable<Coord>) => Observable<boolean>;\n\n  // CalcMixin\n  calcIsInRange!: (start: Coord, opened: boolean) => boolean;\n  calcIsSwipe!: (start: Coord, end: Coord, translateX: number, drawerWidth: number, _: number) => boolean;\n  calcWillOpen!: (start: {}, end: {}, translateX: number, drawerWidth: number, velocity: number) => boolean;\n  calcTranslateX!: (move: Coord, start: Coord, startTranslateX: number, drawerWidth: number) => number;\n\n  // UpdateMixin\n  updateDOM!: (translateX: number, drawerWidth: number) => void;\n  updater!: DOMUpdater;\n\n  // HyDrawer\n  getDrawerWidth(): Observable<number> {\n    const content$ = observeWidth(this.contentEl)\n      .pipe(tap(px => this.fireEvent('content-width-change', { detail: px })));\n    const peek$ = observeWidth(this.peekEl)\n      .pipe(tap(px => this.fireEvent('peek-width-change', { detail: px })));\n\n    return combineLatest([content$, peek$]).pipe(\n      // takeUntil(this.subjects.disconnect),\n      map(([contentWidth, peekWidth]) => contentWidth - peekWidth),\n      share(),\n    );\n  }\n\n  // private consolidateState() {\n  //   const hashOpened = location.hash === this.hashId;\n  //   const isReload = history.state && history.state[this.histId];\n  //   if (isReload) {\n  //     if (hashOpened !== this.opened) {\n  //       this.opened = hashOpened;\n  //     }\n  //   } else {\n  //     const url = new URL(location.href);\n  //     const newState = { ...history.state, [this.histId]: { backable: false } };\n  //     if (hashOpened && !this.opened) {\n  //       url.hash = '';\n  //       history.replaceState(newState, document.title, url.href);\n\n  //       url.hash = this.hashId;\n  //       history.pushState({ [this.histId]: { backable: true } }, document.title, url.href);\n\n  //       this.opened = true;\n  //     }\n  //     else if (!hashOpened && this.opened) {\n  //       history.replaceState(newState, document.title, url.href);\n\n  //       url.hash = this.hashId;\n  //       history.pushState({ [this.histId]: { backable: true } }, document.title, url.href);\n  //     }\n  //     else {\n  //       history.replaceState(newState, document.title, url.href);\n  //     }\n  //   }\n  // }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // if (this.hashChange) this.consolidateState()\n\n    this.$ = {\n      opened: new BehaviorSubject(this.opened),\n      side: new BehaviorSubject(this.side),\n      persistent: new BehaviorSubject(this.persistent),\n      preventDefault: new BehaviorSubject(this.noScroll),\n      mouseEvents: new BehaviorSubject(this.mouseEvents),\n      // hashChange: new BehaviorSubject(this.hashChange),\n    };\n\n    this.scrimClickable = this.opened\n    this.animateTo$ = new Subject<boolean>();\n    this.updater = DOMUpdater.getUpdaterForPlatform(this);\n    this.updateComplete.then(this.upgrade);\n  }\n\n  #translateX$!: Observable<number>;\n  #startTranslateX$!: Observable<number>;\n  #tweenTranslateX$!: Observable<number>;\n\n  upgrade = () => {\n    const drawerWidth$ = this.getDrawerWidth();\n    const active$ = this.$.persistent.pipe(map(_ => !_));\n\n    const start$ = this.getStartObservable().pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(active$),\n      share(),\n    );\n\n    const isScrimVisible$ = defer(() => {\n      return this.#translateX$.pipe(map(translateX => translateX !== 0))\n    });\n\n    const isInRange$ = start$.pipe(\n      withLatestFrom(isScrimVisible$),\n      map(args => this.calcIsInRange(...args)),\n      tap((inRange) => {\n        if (inRange) {\n          this.willChange = true;\n          this.fireEvent('prepare');\n        }\n      }),\n      share(),\n    );\n\n    const end$ = this.getEndObservable().pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(active$, isInRange$),\n      tap(() => { if (this.mouseEvents) this.grabbing = false; }),\n      share(),\n    );\n\n    const move$ = this.getMoveObservable(start$, end$).pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(active$, isInRange$),\n      share(),\n    );\n\n    const isSliding$ = this.getIsSlidingObservable(move$, start$, end$).pipe(\n      tap(isSliding => {\n        this.isSliding = isSliding;\n        if (isSliding && this.mouseEvents) this.grabbing = true;\n        // if (isSliding) this.fireEvent('slidestart', { detail: this.opened });\n      })\n    );\n\n    const translateX$ = this.#translateX$ = defer(() => {\n      const jumpTranslateX$ = combineLatest([this.$.opened, this.$.side, drawerWidth$]).pipe(\n        map(([opened, side, drawerWidth]) => {\n          return !opened ? 0 : drawerWidth * (side === \"left\" ? 1 : -1);\n        }),\n      );\n\n      const moveTranslateX$ = move$.pipe(\n        filterWhen(isSliding$),\n        tap(() => (this.scrimClickable = false)),\n        tap(({ event }) => event && this.noScroll && event.preventDefault()),\n        withLatestFrom(start$, this.#startTranslateX$, drawerWidth$),\n        map(args => this.calcTranslateX(...args))\n      );\n\n      return merge(this.#tweenTranslateX$, jumpTranslateX$, moveTranslateX$);\n    }).pipe(share());\n\n    this.#startTranslateX$ = translateX$.pipe(sample(start$));\n\n    const velocity$ = translateX$.pipe(\n      timestamp(),\n      pairwise(),\n      filter(([{ timestamp: prevTime }, { timestamp: time }]) => time - prevTime > 0),\n      map(\n        ([{ value: prevX, timestamp: prevTime }, { value: x, timestamp: time }]) =>\n          (x - prevX) / (time - prevTime)\n      ),\n      startWith(0),\n    );\n\n    const willOpen$ = end$.pipe(\n      withLatestFrom(start$, translateX$, drawerWidth$, velocity$),\n      filter(args => this.calcIsSwipe(...args)),\n      map(args => this.calcWillOpen(...args)),\n      // TODO: only fire `slideend` event when slidestart fired as well?\n      // tap(willOpen => this.fireEvent('slideend', { detail: willOpen })),\n    );\n\n    const animateTo$ = this.animateTo$.pipe(tap(() => {\n      this.willChange = true;\n      this.fireEvent('prepare');\n    }));\n\n    this.#tweenTranslateX$ = merge(willOpen$, animateTo$).pipe(\n      withLatestFrom(translateX$, drawerWidth$),\n      switchMap(([willOpen, translateX, drawerWidth]) => {\n        const inv = this.side === \"left\" ? 1 : -1;\n        const endTranslateX = willOpen ? drawerWidth * inv : 0;\n        const diffTranslateX = endTranslateX - translateX;\n        const duration = Math.ceil(BASE_DURATION + drawerWidth * WIDTH_CONTRIBUTION);\n\n        return tween(easeOutSine, translateX, diffTranslateX, duration).pipe(\n          finalize(() => { this.transitioned(willOpen) }),\n          takeUntil(start$),\n          takeUntil(this.$.side.pipe(skip(1))),\n          share(),\n        );\n      })\n    );\n\n    translateX$.pipe(\n      withLatestFrom(drawerWidth$),\n      tap((args) => {\n        this.updateDOM(...args);\n        const { translateX, opacity } = this;\n        this.fireEvent('move', { detail: { translateX, opacity }, bubbles: false });\n      }),\n    ).subscribe();\n\n    fromEvent(this.scrimEl, \"click\").pipe(\n      // takeUntil(this.subjects.disconnect),\n      tap(() => this.close()),\n    ).subscribe();\n\n    active$.pipe(\n      // takeUntil(this.subjects.disconnect),\n      tap((active) => {\n        this.scrimEl.style.display = active ? \"block\" : \"none\";\n      }),\n    ).subscribe();\n\n    this.$.mouseEvents.pipe(\n      // takeUntil(this.subjects.disconnect),\n      switchMap(mouseEvents => {\n        return mouseEvents\n          ? start$.pipe(withLatestFrom(isInRange$))\n          : NEVER;\n      }),\n      filter(([coord, isInRange]) => isInRange && coord.event != null),\n      tap(([{ event }]) => event && event.preventDefault()),\n    ).subscribe();\n\n    // fromEvent(window, 'hashchange').pipe(\n    //   // takeUntil(this.subjects.disconnect),\n    //   subscribeWhen(this.$.hashChange),\n    //   tap(() => {\n    //     const opened = location.hash === this.hashId;\n    //     if (!history.state && opened) {\n    //       history.replaceState({ [this.histId]: { backable: true } }, document.title)\n    //     }\n\n    //     // If the state doesn't match open/close the drawer\n    //     if (opened !== this.opened) this.animateTo$.next(opened);\n    //   }),\n    // ).subscribe();\n\n    this.fireEvent(\"init\", { detail: this.opened });\n    this.#initialized.resolve(this);\n  }\n\n  private transitioned = (hasOpened: boolean) => {\n    this.opened = this.scrimClickable = hasOpened;\n    this.willChange = false;\n\n    // if (this.hashChange) this.transitionedHash(hasOpened)\n\n    this.fireEvent('transitioned', { detail: hasOpened });\n  }\n\n  // private transitionedHash(hasOpened: boolean) {\n  //   const hasClosed = !hasOpened;\n  //   const { backable } = history.state && history.state[this.histId] || { backable: false }\n  //   if (hasClosed && backable) {\n  //     history.back()\n  //   } \n  //   if (hasOpened && location.hash !== this.hashId) {\n  //     location.hash = this.hashId;\n  //   }\n  // }\n\n  render() {\n    return html`\n      <div class=\"peek full-height\"></div>\n      <div\n        class=\"scrim\"\n        style=${styleMap({\n          willChange: this.willChange ? 'opacity' : '',\n          pointerEvents: this.scrimClickable ? 'all' : '',\n        })}>\n      </div>\n      ${this.mouseEvents && this.grabbing && !this.scrimClickable \n        ? html`<div class=\"grabbing-screen full-screen\"></div>` \n        : null}\n      <div\n        class=${classMap({\n          wrapper: true,\n          'full-height': true,\n          [this.side]: true,\n          grab: this.mouseEvents,\n          grabbing: this.mouseEvents && this.grabbing,\n        })}\n        style=${styleMap({ \n          willChange: this.willChange ? 'transform' : '',\n        })}\n      >\n        <div class=\"overflow\">\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n\n  @property()\n  open() {\n    this.animateTo$.next(true);\n  }\n\n  @property()\n  close() {\n    this.animateTo$.next(false);\n  }\n\n  @property()\n  toggle() {\n    this.animateTo$.next(!this.opened);\n  }\n}\n","import { Observable, combineLatest, fromEvent, merge, NEVER, ObservedValueOf } from \"rxjs\";\n\nimport {\n  // tap,\n  filter,\n  map,\n  mapTo,\n  repeatWhen,\n  skipWhile,\n  startWith,\n  switchMap,\n  take,\n  withLatestFrom,\n} from \"rxjs/operators\";\n\nimport { subscribeWhen } from \"./common\";\n\nconst abs = Math.abs.bind(Math);\n\nexport type Coord = {\n  readonly target: EventTarget;\n  readonly clientX: number;\n  readonly clientY: number;\n  readonly pageX: number;\n  readonly pageY: number;\n  readonly screenX: number;\n  readonly screenY: number;\n  event?: Event;\n}\n\nexport class ObservablesMixin {\n  $!: {\n    mouseEvents: Observable<boolean>;\n    preventDefault: Observable<boolean>;\n  }\n\n  threshold!: number;\n  noScroll!: boolean;\n\n  getStartObservable() {\n    return combineLatest([this.$.mouseEvents]).pipe(\n      switchMap(([mouseEvents]) => {\n        const touchstart$ = (<Observable<TouchEvent>>fromEvent(document, \"touchstart\", { passive: true })).pipe(\n          filter(({ touches }) => touches.length === 1),\n          map(({ touches }) => touches[0] as Coord)\n        );\n\n        const mousedown$ = !mouseEvents\n          ? NEVER\n          : (<Observable<MouseEvent>>fromEvent(document, \"mousedown\")).pipe(\n            map((e) => (((e as Coord).event = e), e as Coord)),\n          );\n\n        return merge(touchstart$, mousedown$);\n      })\n    );\n  }\n\n  getMoveObservable(start$: Observable<Coord>, end$: Observable<Coord>) {\n    return combineLatest([this.$.mouseEvents, this.$.preventDefault]).pipe(\n      switchMap(([mouseEvents, preventDefault]) => {\n        const touchmove$ = (<Observable<TouchEvent>>fromEvent(document, \"touchmove\", { passive: !preventDefault })).pipe(\n          map(e => (((e.touches[0] as Coord).event = e), e.touches[0] as Coord))\n        );\n\n        const mousemove$ = !mouseEvents\n          ? NEVER\n          : (<Observable<MouseEvent>>fromEvent(document, \"mousemove\", { passive: !preventDefault })).pipe(\n            subscribeWhen(merge(start$.pipe(mapTo(true)), end$.pipe(mapTo(false)))),\n            map(e => (((e as Coord).event = e), e as Coord))\n          );\n\n        return merge(touchmove$, mousemove$);\n      })\n    );\n  }\n\n  getEndObservable() {\n    return combineLatest([this.$.mouseEvents]).pipe(\n      switchMap(([mouseEvents]) => {\n        const touchend$ = (<Observable<TouchEvent>>fromEvent(document, \"touchend\", { passive: true })).pipe(\n          filter(({ touches }) => touches.length === 0),\n          map(event => event.changedTouches[0] as Coord)\n        );\n\n        const mouseup$ = !mouseEvents\n          ? NEVER\n          : (<Observable<MouseEvent>>fromEvent(document, \"mouseup\", { passive: true })).pipe(\n            map(e => (((e as Coord).event = e), e as Coord)),\n          );\n\n        return merge(touchend$, mouseup$);\n      })\n    );\n  }\n\n  getIsSlidingObservable(move$: Observable<Coord>, start$: Observable<Coord>, end$: Observable<Coord>) {\n    return this.getIsSlidingObservableInner(move$, start$).pipe(\n      take(1),\n      startWith(undefined),\n      repeatWhen(() => end$)\n    );\n  }\n\n  getIsSlidingObservableInner(move$: Observable<Coord>, start$: Observable<Coord>) {\n    if (this.threshold) {\n      return move$.pipe(\n        withLatestFrom(start$),\n        skipWhile(\n          ([{ clientX, clientY }, { clientX: startX, clientY: startY }]) =>\n            abs(startY - clientY) < this.threshold && abs(startX - clientX) < this.threshold\n        ),\n        map(\n          ([{ clientX, clientY }, { clientX: startX, clientY: startY }]) =>\n            abs(startX - clientX) >= abs(startY - clientY)\n        )\n      );\n    } else {\n      return move$.pipe(\n        withLatestFrom(start$),\n        map(([{ clientX, clientY, event }, { clientX: startX, clientY: startY }]) => {\n          const isSliding = abs(startX - clientX) >= abs(startY - clientY);\n          if (this.noScroll && isSliding && event) event.preventDefault();\n          return isSliding;\n        })\n      );\n    }\n  }\n}\n","import { css } from 'lit-element';\n\nexport const styles = css`\n  @media screen {\n    :host {\n      touch-action: pan-x;\n    }\n\n    .full-screen {\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 100vh;\n      width: 100vw;\n    }\n\n    .full-height {\n      position: fixed;\n      top: 0;\n      height: 100vh;\n    }\n\n    .peek {\n      left: 0;\n      width: var(--hy-drawer-peek-width, 0px);\n      visibility: hidden;\n      z-index: calc(var(--hy-drawer-z-index, 100) - 1);\n    }\n\n    .scrim {\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 10vh;\n      width: 10vw;\n      transform: scale(10);\n      transform-origin: top left;\n      opacity: 0;\n      pointer-events: none;\n      background: var(--hy-drawer-scrim-background, rgba(0, 0, 0, 0.5));\n      z-index: var(--hy-drawer-z-index, 100);\n      -webkit-tap-highlight-color: transparent;\n    }\n\n    .range {\n      position: fixed;\n      top: 0;\n      height: 100vh;\n      z-index: calc(var(--hy-drawer-z-index, 100) + 1);\n    }\n\n    .grabbing-screen {\n      cursor: grabbing;\n      z-index: calc(var(--hy-drawer-z-index, 100) + 2);\n    }\n\n    .wrapper {\n      width: var(--hy-drawer-width, 300px);\n      background: var(--hy-drawer-background, inherit);\n      box-shadow: var(--hy-drawer-box-shadow, 0 0 15px rgba(0, 0, 0, 0.25));\n      z-index: calc(var(--hy-drawer-z-index, 100) + 3);\n      contain: strict;\n    }\n\n    .wrapper.left {\n      left:  calc(-1 * var(--hy-drawer-width, 300px) + var(--hy-drawer-peek-width, 0px));\n    }\n\n    .wrapper.right {\n      right:  calc(-1 * var(--hy-drawer-width, 300px) + var(--hy-drawer-peek-width, 0px));\n    }\n\n    .wrapper > .overflow {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      overflow-x: hidden;\n      overflow-y: auto;\n      overscroll-behavior: contain;\n      -webkit-overflow-scrolling: touch;\n    }\n\n    .grab {\n      cursor: move;\n      cursor: grab;\n    }\n\n    .grabbing {\n      cursor: grabbing;\n    }\n  }\n\n  @media print {\n    .scrim {\n      display: none !important;\n    }\n\n    .wrapper {\n      transform: none !important;\n    }\n  }\n`;","export type CallbackValue = { translateX: number, opacity: number };\n\nexport class UpdateMixin {\n  contentEl!: HTMLElement;\n  scrimEl!: HTMLElement;\n\n  translateX!: number;\n  side!: string;\n  opacity!: number;\n\n  updater!: DOMUpdater;\n\n  updateDOM(translateX: number, drawerWidth: number) {\n    const inv = this.side === \"left\" ? 1 : -1;\n    const opacity = (translateX / drawerWidth) * inv || 0;\n\n    this.translateX = translateX;\n    this.opacity = opacity;\n\n    this.updater.updateDOM(translateX, opacity);\n  }\n}\n\nexport abstract class DOMUpdater {\n  static getUpdaterForPlatform(parent: UpdateMixin) {\n    const hasCSSOM = \"attributeStyleMap\" in Element.prototype && \"CSS\" in window && \"number\" in CSS;\n    return hasCSSOM\n      ? new AttributeStyleMapUpdater(parent)\n      : new StyleUpdater(parent);\n  }\n\n  private parent: UpdateMixin;\n  constructor(parent: UpdateMixin) {\n    this.parent = parent;\n  }\n  get contentEl() { return this.parent.contentEl }\n  get scrimEl() { return this.parent.scrimEl }\n\n  abstract updateDOM(translateX: number, opacity: number): void;\n}\n\nexport class StyleUpdater extends DOMUpdater {\n  constructor(parent: UpdateMixin) { super(parent); }\n\n  updateDOM(translateX: number, opacity: number) {\n    this.contentEl.style.transform = `translate(${translateX}px, 0px)`;\n    this.scrimEl.style.opacity = `${opacity}`;\n  }\n}\n\nexport class AttributeStyleMapUpdater extends DOMUpdater {\n  private tvalue: CSSTransformValue;\n  private ovalue: CSSUnitValue;\n\n  constructor(parent: UpdateMixin) {\n    super(parent);\n    this.tvalue = new CSSTransformValue([new CSSTranslate(CSS.px(0), CSS.px(0))]);\n    this.ovalue = CSS.number(1);\n  }\n\n  updateDOM(translateX: number, opacity: number) {\n    ((this.tvalue[0] as CSSTranslate).x as CSSUnitValue).value = translateX;\n    this.ovalue.value = opacity;\n\n    this.contentEl.attributeStyleMap.set(\"transform\", this.tvalue);\n    this.scrimEl.attributeStyleMap.set(\"opacity\", this.ovalue);\n  }\n}","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {AttributePart, directive, Part, PropertyPart} from '../lit-html.js';\n\n// IE11 doesn't support classList on SVG elements, so we emulate it with a Set\nclass ClassList {\n  element: Element;\n  classes: Set<string> = new Set();\n  changed = false;\n\n  constructor(element: Element) {\n    this.element = element;\n    const classList = (element.getAttribute('class') || '').split(/\\s+/);\n    for (const cls of classList) {\n      this.classes.add(cls);\n    }\n  }\n  add(cls: string) {\n    this.classes.add(cls);\n    this.changed = true;\n  }\n\n  remove(cls: string) {\n    this.classes.delete(cls);\n    this.changed = true;\n  }\n\n  commit() {\n    if (this.changed) {\n      let classString = '';\n      this.classes.forEach((cls) => classString += cls + ' ');\n      this.element.setAttribute('class', classString);\n    }\n  }\n}\n\nexport interface ClassInfo {\n  readonly [name: string]: string|boolean|number;\n}\n\n/**\n * Stores the ClassInfo object applied to a given AttributePart.\n * Used to unset existing values when a new ClassInfo object is applied.\n */\nconst previousClassesCache = new WeakMap<Part, Set<string>>();\n\n/**\n * A directive that applies CSS classes. This must be used in the `class`\n * attribute and must be the only part used in the attribute. It takes each\n * property in the `classInfo` argument and adds the property name to the\n * element's `class` if the property value is truthy; if the property value is\n * falsey, the property name is removed from the element's `class`. For example\n * `{foo: bar}` applies the class `foo` if the value of `bar` is truthy.\n * @param classInfo {ClassInfo}\n */\nexport const classMap = directive((classInfo: ClassInfo) => (part: Part) => {\n  if (!(part instanceof AttributePart) || (part instanceof PropertyPart) ||\n      part.committer.name !== 'class' || part.committer.parts.length > 1) {\n    throw new Error(\n        'The `classMap` directive must be used in the `class` attribute ' +\n        'and must be the only part in the attribute.');\n  }\n\n  const {committer} = part;\n  const {element} = committer;\n\n  let previousClasses = previousClassesCache.get(part);\n  if (previousClasses === undefined) {\n    // Write static classes once\n    // Use setAttribute() because className isn't a string on SVG elements\n    element.setAttribute('class', committer.strings.join(' '));\n    previousClassesCache.set(part, previousClasses = new Set());\n  }\n\n  const classList =\n      (element.classList || new ClassList(element)) as DOMTokenList | ClassList;\n\n  // Remove old classes that no longer apply\n  // We use forEach() instead of for-of so that re don't require down-level\n  // iteration.\n  previousClasses.forEach((name) => {\n    if (!(name in classInfo)) {\n      classList.remove(name);\n      previousClasses!.delete(name);\n    }\n  });\n\n  // Add or remove classes based on their classMap value\n  for (const name in classInfo) {\n    const value = classInfo[name];\n    if (value != previousClasses.has(name)) {\n      // We explicitly want a loose truthy check of `value` because it seems\n      // more convenient that '' and 0 are skipped.\n      if (value) {\n        classList.add(name);\n        previousClasses.add(name);\n      } else {\n        classList.remove(name);\n        previousClasses.delete(name);\n      }\n    }\n  }\n  if (typeof (classList as ClassList).commit === 'function') {\n    (classList as ClassList).commit();\n  }\n});\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {AttributePart, directive, Part, PropertyPart} from '../lit-html.js';\n\nexport interface StyleInfo {\n  readonly [name: string]: string;\n}\n\n/**\n * Stores the StyleInfo object applied to a given AttributePart.\n * Used to unset existing values when a new StyleInfo object is applied.\n */\nconst previousStylePropertyCache = new WeakMap<AttributePart, Set<string>>();\n\n/**\n * A directive that applies CSS properties to an element.\n *\n * `styleMap` can only be used in the `style` attribute and must be the only\n * expression in the attribute. It takes the property names in the `styleInfo`\n * object and adds the property values as CSS properties. Property names with\n * dashes (`-`) are assumed to be valid CSS property names and set on the\n * element's style object using `setProperty()`. Names without dashes are\n * assumed to be camelCased JavaScript property names and set on the element's\n * style object using property assignment, allowing the style object to\n * translate JavaScript-style names to CSS property names.\n *\n * For example `styleMap({backgroundColor: 'red', 'border-top': '5px', '--size':\n * '0'})` sets the `background-color`, `border-top` and `--size` properties.\n *\n * @param styleInfo {StyleInfo}\n */\nexport const styleMap = directive((styleInfo: StyleInfo) => (part: Part) => {\n  if (!(part instanceof AttributePart) || (part instanceof PropertyPart) ||\n      part.committer.name !== 'style' || part.committer.parts.length > 1) {\n    throw new Error(\n        'The `styleMap` directive must be used in the style attribute ' +\n        'and must be the only part in the attribute.');\n  }\n\n  const {committer} = part;\n  const {style} = committer.element as HTMLElement;\n\n  let previousStyleProperties = previousStylePropertyCache.get(part);\n\n  if (previousStyleProperties === undefined) {\n    // Write static styles once\n    style.cssText = committer.strings.join(' ');\n    previousStylePropertyCache.set(part, previousStyleProperties = new Set());\n  }\n\n  // Remove old properties that no longer exist in styleInfo\n  // We use forEach() instead of for-of so that re don't require down-level\n  // iteration.\n  previousStyleProperties.forEach((name) => {\n    if (!(name in styleInfo)) {\n      previousStyleProperties!.delete(name);\n      if (name.indexOf('-') === -1) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (style as any)[name] = null;\n      } else {\n        style.removeProperty(name);\n      }\n    }\n  });\n\n  // Add or update properties\n  for (const name in styleInfo) {\n    previousStyleProperties.add(name);\n    if (name.indexOf('-') === -1) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (style as any)[name] = styleInfo[name];\n    } else {\n      style.setProperty(name, styleInfo[name]);\n    }\n  }\n});\n"],"sourceRoot":""}