{"version":3,"sources":["webpack:///../src/calc.ts","webpack:///../src/common.ts","webpack:///../src/constants.ts","webpack:///../src/index.ts","webpack:///../src/observables.ts","webpack:///../src/styles.ts","webpack:///../src/update.ts","webpack:///../src/directives/class-map.ts","webpack:///../src/directives/style-map.ts"],"names":["min","Math","bind","max","CalcMixin","calcIsInRange","_ref","opened","clientX","side","lower","upper","range","window","innerWidth","Error","calcIsSwipe","_ref2","_ref3","translateX","drawerWidth","_","startX","endX","calcWillOpen","__","velocity","VELOCITY_THRESHOLD","calcTranslateX","_ref4","_ref5","startTranslateX","moveX","deltaX","easeOutSine","t","b","c","d","sin","PI","observeWidth","el","resize$","createResizeObservable","of","contentRect","width","clientWidth","pipe","map","rangeConverter","fromAttribute","attr","replace","split","Number","toAttribute","join","rangeHasChanged","curr","prev","arguments","length","undefined","some","v","i","BASE_DURATION","WIDTH_CONTRIBUTION","HyDrawer","applyMixins","RxLitElement","ObservablesMixin","UpdateMixin","constructor","persistent","threshold","noScroll","mouseEvents","willChange","_HyDrawer_initialized","set","createResolvablePromise","_HyDrawer_translateX$","_HyDrawer_startTranslateX$","_HyDrawer_tweenTranslateX$","upgrade","drawerWidth$","getDrawerWidth","active$","$","start$","getStartObservable","filterWhen","share","isScrimVisible$","defer","__classPrivateFieldGet","isInRange$","withLatestFrom","args","tap","inRange","fireEvent","end$","getEndObservable","grabbing","move$","getMoveObservable","isSliding$","getIsSlidingObservable","isSliding","translateX$","__classPrivateFieldSet","jumpTranslateX$","combineLatest","moveTranslateX$","scrimClickable","event","preventDefault","merge","sample","velocity$","timestamp","pairwise","filter","prevTime","time","value","prevX","x","startWith","willOpen$","animateTo$","switchMap","willOpen","inv","endTranslateX","diffTranslateX","duration","ceil","tween","finalize","transitioned","takeUntil","skip","updateDOM","opacity","detail","bubbles","subscribe","fromEvent","scrimEl","close","active","style","display","NEVER","_ref6","coord","isInRange","_ref7","resolve","hasOpened","initialized","content$","contentEl","px","peek$","peekEl","_ref8","contentWidth","peekWidth","connectedCallback","BehaviorSubject","Subject","updater","DOMUpdater","getUpdaterForPlatform","updateComplete","then","render","html","_templateObject","_taggedTemplateLiteral","styleMap","pointerEvents","_templateObject2","classMap","wrapper","grab","open","next","toggle","styles","__decorate","query","property","type","Boolean","reflect","String","converter","hasChanged","customElement","abs","touchstart$","document","passive","touches","mousedown$","e","touchmove$","mousemove$","subscribeWhen","mapTo","touchend$","changedTouches","mouseup$","getIsSlidingObservableInner","take","repeatWhen","skipWhile","clientY","startY","_ref9","css","parent","hasCSSOM","Element","prototype","CSS","AttributeStyleMapUpdater","StyleUpdater","transform","concat","tvalue","CSSTransformValue","CSSTranslate","ovalue","number","attributeStyleMap","ClassList","element","classes","Set","changed","classList","getAttribute","cls","add","remove","delete","commit","classString","forEach","setAttribute","previousClassesCache","WeakMap","directive","classInfo","part","AttributePart","PropertyPart","committer","name","parts","previousClasses","get","strings","has","previousStylePropertyCache","styleInfo","previousStyleProperties","cssText","indexOf","removeProperty","setProperty"],"mappings":"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","file":"vendors~drawer-hydejack-9.2.1.js","sourcesContent":["import { VELOCITY_THRESHOLD } from \"./constants\";\n\nimport { Coord } from './observables';\n\n// Using shorthands for common functions\nconst min = Math.min.bind(Math);\nconst max = Math.max.bind(Math);\n\nexport class CalcMixin {\n  side!: 'left' | 'right';\n  range!: [number, number];\n\n  calcIsInRange({ clientX }: Coord, opened: boolean) {\n    // console.log(this.range, this.align);\n    switch (this.side) {\n      case \"left\": {\n        const [lower, upper] = this.range;\n        return clientX > lower && (opened || clientX < upper);\n      }\n      case \"right\": {\n        const upper = window.innerWidth - this.range[0];\n        const lower = window.innerWidth - this.range[1];\n        return clientX < upper && (opened || clientX > lower);\n      }\n      default:\n        throw Error();\n    }\n  }\n\n  calcIsSwipe({ clientX: startX }: Coord, { clientX: endX }: Coord, translateX: number, drawerWidth: number, _: number): boolean {\n    return endX !== startX || (translateX > 0 && translateX < drawerWidth);\n  }\n\n  calcWillOpen(_: {}, __: {}, translateX: number, drawerWidth: number, velocity: number): boolean {\n    switch (this.side) {\n      case \"left\": {\n        if (velocity > VELOCITY_THRESHOLD) return true;\n        else if (velocity < -VELOCITY_THRESHOLD) return false;\n        else if (translateX >= drawerWidth / 2) return true;\n        else return false;\n      }\n      case \"right\": {\n        if (-velocity > VELOCITY_THRESHOLD) return true;\n        else if (-velocity < -VELOCITY_THRESHOLD) return false;\n        else if (translateX <= -drawerWidth / 2) return true;\n        else return false;\n      }\n      default:\n        throw Error();\n    }\n  }\n\n  calcTranslateX({ clientX: moveX }: Coord, { clientX: startX }: Coord, startTranslateX: number, drawerWidth: number): number {\n    switch (this.side) {\n      case \"left\": {\n        const deltaX = moveX - startX;\n        const translateX = startTranslateX + deltaX;\n        return max(0, min(drawerWidth, translateX));\n      }\n      case \"right\": {\n        const deltaX = moveX - startX;\n        const translateX = startTranslateX + deltaX;\n        return min(0, max(-drawerWidth, translateX));\n      }\n      default:\n        throw Error();\n    }\n  }\n};","import { of } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport { createResizeObservable } from '@hydecorp/component';\nimport { ComplexAttributeConverter } from \"lit-element\";\n\nexport { applyMixins, subscribeWhen, filterWhen, tween } from '@hydecorp/component';\n\nexport function easeOutSine(t: number, b: number, c: number, d: number) {\n  return c * Math.sin((t / d) * (Math.PI / 2)) + b;\n}\n\nexport function observeWidth(el: HTMLElement) {\n  // This component should have at least basic support without `ResizeObserver` support,\n  // so we pass a one-time measurement when it's missing. Obviously this won't update, so BYO polyfill.\n  const resize$ = \"ResizeObserver\" in window\n    ? createResizeObservable(el)\n    : of({ contentRect: { width: el.clientWidth }});\n  return resize$.pipe(map(({ contentRect: { width } }) => width));\n}\n\nexport const rangeConverter: ComplexAttributeConverter<number[]> = {\n  fromAttribute(attr) {\n    return (attr ?? '').replace(/[\\[\\]]/g, '')\n      .split(',')\n      .map(Number);\n  },\n\n  toAttribute(range) {\n    return range.join(',');\n  },\n};\n\nexport function rangeHasChanged(curr: number[], prev: number[] = []) {\n  return curr.length !== prev.length || curr.some((v, i) => v !== prev[i]);\n}\n","// The base duration of the fling animation.\nexport const BASE_DURATION = 200;\n\n// We adjust the duration of the animation using the width of the drawer.\n// There is no physics to this, but we know from testing that the animation starts to feel bad\n// when the drawer increases in size.\n// From testing we know that, if we increase the duration as a fraction of the drawer width,\n// the animation stays smooth across common display sizes.\nexport const WIDTH_CONTRIBUTION = 0.15;\n\n// Minimum velocity of the drawer (in px/ms) when releasing to make it fling to opened/closed state.\nexport const VELOCITY_THRESHOLD = 0.15;\n","/** \n * Copyright (c) 2020 Florian Klampfer <https://qwtel.com/>\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n * \n * @license \n * @nocompile\n */\nimport { html, property, customElement, query } from 'lit-element';\nimport { classMap } from 'lit-html/directives/class-map';\nimport { styleMap } from 'lit-html/directives/style-map';\n\nimport { Observable, Subject, BehaviorSubject, combineLatest, merge, NEVER, defer, fromEvent } from \"rxjs\";\nimport { startWith, takeUntil, map, share, withLatestFrom, tap, sample, timestamp, pairwise, filter, switchMap, skip, finalize } from 'rxjs/operators';\n\nimport { RxLitElement, createResolvablePromise } from '@hydecorp/component';\n\nimport { BASE_DURATION, WIDTH_CONTRIBUTION } from './constants';\nimport { applyMixins, filterWhen, easeOutSine, observeWidth, rangeConverter, rangeHasChanged, tween } from './common';\nimport { ObservablesMixin, Coord } from './observables';\nimport { CalcMixin } from './calc';\nimport { UpdateMixin, DOMUpdater } from './update';\nimport { styles } from './styles';\n\n@customElement('hy-drawer')\nexport class HyDrawer \n    extends applyMixins(RxLitElement, [ObservablesMixin, UpdateMixin, CalcMixin])\n    implements ObservablesMixin, UpdateMixin, CalcMixin {\n\n  static styles = styles;\n\n  @query('.scrim') scrimEl!: HTMLElement;\n  @query('.wrapper') contentEl!: HTMLElement;\n  @query('.peek') peekEl!: HTMLElement;\n\n  @property({ type: Boolean, reflect: true }) opened: boolean = false;\n  @property({ type: String, reflect: true }) side: \"left\" | \"right\" = \"left\";\n  @property({ type: Boolean, reflect: true }) persistent: boolean = false;\n  @property({ type: Number, reflect: true }) threshold: number = 10;\n  @property({ type: Boolean, reflect: true }) noScroll: boolean = false;\n  @property({ type: Boolean, reflect: true }) mouseEvents: boolean = false;\n  // @property({ type: Boolean, reflect: true }) hashChange: boolean = false;\n  @property({ reflect: true, converter: rangeConverter, hasChanged: rangeHasChanged }) range: [number, number] = [0, 100];\n\n  // State\n  @property() scrimClickable!: boolean;\n  @property() grabbing!: boolean;\n  @property() willChange: boolean = false;\n\n  #initialized = createResolvablePromise();\n  get initialized() {\n    return this.#initialized;\n  }\n \n  // get histId() { return this.id || this.tagName; }\n  // get hashId() { return `#${this.histId}--opened`; }\n\n  translateX!: number;\n  opacity!: number;\n  isSliding!: boolean;\n\n  $!: {\n    opened: Subject<boolean>;\n    side: Subject<\"left\" | \"right\">;\n    persistent: Subject<boolean>;\n    preventDefault: Subject<boolean>;\n    mouseEvents: Subject<boolean>;\n    // hashChange: Subject<boolean>;\n  };\n\n  animateTo$!: Subject<boolean>;\n\n  // TODO: Prefer composition to mixins...\n  // ObservablesMixin\n  getStartObservable!: () => Observable<Coord>;\n  getMoveObservable!: (start: Observable<Coord>, end: Observable<Coord>) => Observable<Coord>;\n  getEndObservable!: () => Observable<Coord>;\n  getIsSlidingObservable!: (move: Observable<Coord>, start: Observable<Coord>, end: Observable<Coord>) => Observable<boolean>;\n  getIsSlidingObservableInner!: (move: Observable<Coord>, start: Observable<Coord>) => Observable<boolean>;\n\n  // CalcMixin\n  calcIsInRange!: (start: Coord, opened: boolean) => boolean;\n  calcIsSwipe!: (start: Coord, end: Coord, translateX: number, drawerWidth: number, _: number) => boolean;\n  calcWillOpen!: (start: {}, end: {}, translateX: number, drawerWidth: number, velocity: number) => boolean;\n  calcTranslateX!: (move: Coord, start: Coord, startTranslateX: number, drawerWidth: number) => number;\n\n  // UpdateMixin\n  updateDOM!: (translateX: number, drawerWidth: number) => void;\n  updater!: DOMUpdater;\n\n  // HyDrawer\n  getDrawerWidth(): Observable<number> {\n    const content$ = observeWidth(this.contentEl)\n      .pipe(tap(px => this.fireEvent('content-width-change', { detail: px })));\n    const peek$ = observeWidth(this.peekEl)\n      .pipe(tap(px => this.fireEvent('peek-width-change', { detail: px })));\n\n    return combineLatest([content$, peek$]).pipe(\n      // takeUntil(this.subjects.disconnect),\n      map(([contentWidth, peekWidth]) => contentWidth - peekWidth),\n      share(),\n    );\n  }\n\n  // private consolidateState() {\n  //   const hashOpened = location.hash === this.hashId;\n  //   const isReload = history.state && history.state[this.histId];\n  //   if (isReload) {\n  //     if (hashOpened !== this.opened) {\n  //       this.opened = hashOpened;\n  //     }\n  //   } else {\n  //     const url = new URL(location.href);\n  //     const newState = { ...history.state, [this.histId]: { backable: false } };\n  //     if (hashOpened && !this.opened) {\n  //       url.hash = '';\n  //       history.replaceState(newState, document.title, url.href);\n\n  //       url.hash = this.hashId;\n  //       history.pushState({ [this.histId]: { backable: true } }, document.title, url.href);\n\n  //       this.opened = true;\n  //     }\n  //     else if (!hashOpened && this.opened) {\n  //       history.replaceState(newState, document.title, url.href);\n\n  //       url.hash = this.hashId;\n  //       history.pushState({ [this.histId]: { backable: true } }, document.title, url.href);\n  //     }\n  //     else {\n  //       history.replaceState(newState, document.title, url.href);\n  //     }\n  //   }\n  // }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // if (this.hashChange) this.consolidateState()\n\n    this.$ = {\n      opened: new BehaviorSubject(this.opened),\n      side: new BehaviorSubject(this.side),\n      persistent: new BehaviorSubject(this.persistent),\n      preventDefault: new BehaviorSubject(this.noScroll),\n      mouseEvents: new BehaviorSubject(this.mouseEvents),\n      // hashChange: new BehaviorSubject(this.hashChange),\n    };\n\n    this.scrimClickable = this.opened\n    this.animateTo$ = new Subject<boolean>();\n    this.updater = DOMUpdater.getUpdaterForPlatform(this);\n    this.updateComplete.then(this.upgrade);\n  }\n\n  #translateX$!: Observable<number>;\n  #startTranslateX$!: Observable<number>;\n  #tweenTranslateX$!: Observable<number>;\n\n  upgrade = () => {\n    const drawerWidth$ = this.getDrawerWidth();\n    const active$ = this.$.persistent.pipe(map(_ => !_));\n\n    const start$ = this.getStartObservable().pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(active$),\n      share(),\n    );\n\n    const isScrimVisible$ = defer(() => {\n      return this.#translateX$.pipe(map(translateX => translateX !== 0))\n    });\n\n    const isInRange$ = start$.pipe(\n      withLatestFrom(isScrimVisible$),\n      map(args => this.calcIsInRange(...args)),\n      tap((inRange) => {\n        if (inRange) {\n          this.willChange = true;\n          this.fireEvent('prepare');\n        }\n      }),\n      share(),\n    );\n\n    const end$ = this.getEndObservable().pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(active$, isInRange$),\n      tap(() => { if (this.mouseEvents) this.grabbing = false; }),\n      share(),\n    );\n\n    const move$ = this.getMoveObservable(start$, end$).pipe(\n      // takeUntil(this.subjects.disconnect),\n      filterWhen(active$, isInRange$),\n      share(),\n    );\n\n    const isSliding$ = this.getIsSlidingObservable(move$, start$, end$).pipe(\n      tap(isSliding => {\n        this.isSliding = isSliding;\n        if (isSliding && this.mouseEvents) this.grabbing = true;\n        // if (isSliding) this.fireEvent('slidestart', { detail: this.opened });\n      })\n    );\n\n    const translateX$ = this.#translateX$ = defer(() => {\n      const jumpTranslateX$ = combineLatest([this.$.opened, this.$.side, drawerWidth$]).pipe(\n        map(([opened, side, drawerWidth]) => {\n          return !opened ? 0 : drawerWidth * (side === \"left\" ? 1 : -1);\n        }),\n      );\n\n      const moveTranslateX$ = move$.pipe(\n        filterWhen(isSliding$),\n        tap(() => (this.scrimClickable = false)),\n        tap(({ event }) => event && this.noScroll && event.preventDefault()),\n        withLatestFrom(start$, this.#startTranslateX$, drawerWidth$),\n        map(args => this.calcTranslateX(...args))\n      );\n\n      return merge(this.#tweenTranslateX$, jumpTranslateX$, moveTranslateX$);\n    }).pipe(share());\n\n    this.#startTranslateX$ = translateX$.pipe(sample(start$));\n\n    const velocity$ = translateX$.pipe(\n      timestamp(),\n      pairwise(),\n      filter(([{ timestamp: prevTime }, { timestamp: time }]) => time - prevTime > 0),\n      map(\n        ([{ value: prevX, timestamp: prevTime }, { value: x, timestamp: time }]) =>\n          (x - prevX) / (time - prevTime)\n      ),\n      startWith(0),\n    );\n\n    const willOpen$ = end$.pipe(\n      withLatestFrom(start$, translateX$, drawerWidth$, velocity$),\n      filter(args => this.calcIsSwipe(...args)),\n      map(args => this.calcWillOpen(...args)),\n      // TODO: only fire `slideend` event when slidestart fired as well?\n      // tap(willOpen => this.fireEvent('slideend', { detail: willOpen })),\n    );\n\n    const animateTo$ = this.animateTo$.pipe(tap(() => {\n      this.willChange = true;\n      this.fireEvent('prepare');\n    }));\n\n    this.#tweenTranslateX$ = merge(willOpen$, animateTo$).pipe(\n      withLatestFrom(translateX$, drawerWidth$),\n      switchMap(([willOpen, translateX, drawerWidth]) => {\n        const inv = this.side === \"left\" ? 1 : -1;\n        const endTranslateX = willOpen ? drawerWidth * inv : 0;\n        const diffTranslateX = endTranslateX - translateX;\n        const duration = Math.ceil(BASE_DURATION + drawerWidth * WIDTH_CONTRIBUTION);\n\n        return tween(easeOutSine, translateX, diffTranslateX, duration).pipe(\n          finalize(() => { this.transitioned(willOpen) }),\n          takeUntil(start$),\n          takeUntil(this.$.side.pipe(skip(1))),\n          share(),\n        );\n      })\n    );\n\n    translateX$.pipe(\n      withLatestFrom(drawerWidth$),\n      tap((args) => {\n        this.updateDOM(...args);\n        const { translateX, opacity } = this;\n        this.fireEvent('move', { detail: { translateX, opacity }, bubbles: false });\n      }),\n    ).subscribe();\n\n    fromEvent(this.scrimEl, \"click\").pipe(\n      // takeUntil(this.subjects.disconnect),\n      tap(() => this.close()),\n    ).subscribe();\n\n    active$.pipe(\n      // takeUntil(this.subjects.disconnect),\n      tap((active) => {\n        this.scrimEl.style.display = active ? \"block\" : \"none\";\n      }),\n    ).subscribe();\n\n    this.$.mouseEvents.pipe(\n      // takeUntil(this.subjects.disconnect),\n      switchMap(mouseEvents => {\n        return mouseEvents\n          ? start$.pipe(withLatestFrom(isInRange$))\n          : NEVER;\n      }),\n      filter(([coord, isInRange]) => isInRange && coord.event != null),\n      tap(([{ event }]) => event && event.preventDefault()),\n    ).subscribe();\n\n    // fromEvent(window, 'hashchange').pipe(\n    //   // takeUntil(this.subjects.disconnect),\n    //   subscribeWhen(this.$.hashChange),\n    //   tap(() => {\n    //     const opened = location.hash === this.hashId;\n    //     if (!history.state && opened) {\n    //       history.replaceState({ [this.histId]: { backable: true } }, document.title)\n    //     }\n\n    //     // If the state doesn't match open/close the drawer\n    //     if (opened !== this.opened) this.animateTo$.next(opened);\n    //   }),\n    // ).subscribe();\n\n    this.fireEvent(\"init\", { detail: this.opened });\n    this.#initialized.resolve(this);\n  }\n\n  private transitioned = (hasOpened: boolean) => {\n    this.opened = this.scrimClickable = hasOpened;\n    this.willChange = false;\n\n    // if (this.hashChange) this.transitionedHash(hasOpened)\n\n    this.fireEvent('transitioned', { detail: hasOpened });\n  }\n\n  // private transitionedHash(hasOpened: boolean) {\n  //   const hasClosed = !hasOpened;\n  //   const { backable } = history.state && history.state[this.histId] || { backable: false }\n  //   if (hasClosed && backable) {\n  //     history.back()\n  //   } \n  //   if (hasOpened && location.hash !== this.hashId) {\n  //     location.hash = this.hashId;\n  //   }\n  // }\n\n  render() {\n    return html`\n      <div class=\"peek full-height\"></div>\n      <div\n        class=\"scrim\"\n        style=${styleMap({\n          willChange: this.willChange ? 'opacity' : '',\n          pointerEvents: this.scrimClickable ? 'all' : '',\n        })}>\n      </div>\n      ${this.mouseEvents && this.grabbing && !this.scrimClickable \n        ? html`<div class=\"grabbing-screen full-screen\"></div>` \n        : null}\n      <div\n        class=${classMap({\n          wrapper: true,\n          'full-height': true,\n          [this.side]: true,\n          grab: this.mouseEvents,\n          grabbing: this.mouseEvents && this.grabbing,\n        })}\n        style=${styleMap({ \n          willChange: this.willChange ? 'transform' : '',\n        })}\n      >\n        <div class=\"overflow\">\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n\n  @property()\n  open() {\n    this.animateTo$.next(true);\n  }\n\n  @property()\n  close() {\n    this.animateTo$.next(false);\n  }\n\n  @property()\n  toggle() {\n    this.animateTo$.next(!this.opened);\n  }\n}\n","import { Observable, combineLatest, fromEvent, merge, NEVER, ObservedValueOf } from \"rxjs\";\n\nimport {\n  // tap,\n  filter,\n  map,\n  mapTo,\n  repeatWhen,\n  skipWhile,\n  startWith,\n  switchMap,\n  take,\n  withLatestFrom,\n} from \"rxjs/operators\";\n\nimport { subscribeWhen } from \"./common\";\n\nconst abs = Math.abs.bind(Math);\n\nexport type Coord = {\n  readonly target: EventTarget;\n  readonly clientX: number;\n  readonly clientY: number;\n  readonly pageX: number;\n  readonly pageY: number;\n  readonly screenX: number;\n  readonly screenY: number;\n  event?: Event;\n}\n\nexport class ObservablesMixin {\n  $!: {\n    mouseEvents: Observable<boolean>;\n    preventDefault: Observable<boolean>;\n  }\n\n  threshold!: number;\n  noScroll!: boolean;\n\n  getStartObservable() {\n    return combineLatest([this.$.mouseEvents]).pipe(\n      switchMap(([mouseEvents]) => {\n        const touchstart$ = (<Observable<TouchEvent>>fromEvent(document, \"touchstart\", { passive: true })).pipe(\n          filter(({ touches }) => touches.length === 1),\n          map(({ touches }) => touches[0] as Coord)\n        );\n\n        const mousedown$ = !mouseEvents\n          ? NEVER\n          : (<Observable<MouseEvent>>fromEvent(document, \"mousedown\")).pipe(\n            map((e) => (((e as Coord).event = e), e as Coord)),\n          );\n\n        return merge(touchstart$, mousedown$);\n      })\n    );\n  }\n\n  getMoveObservable(start$: Observable<Coord>, end$: Observable<Coord>) {\n    return combineLatest([this.$.mouseEvents, this.$.preventDefault]).pipe(\n      switchMap(([mouseEvents, preventDefault]) => {\n        const touchmove$ = (<Observable<TouchEvent>>fromEvent(document, \"touchmove\", { passive: !preventDefault })).pipe(\n          map(e => (((e.touches[0] as Coord).event = e), e.touches[0] as Coord))\n        );\n\n        const mousemove$ = !mouseEvents\n          ? NEVER\n          : (<Observable<MouseEvent>>fromEvent(document, \"mousemove\", { passive: !preventDefault })).pipe(\n            subscribeWhen(merge(start$.pipe(mapTo(true)), end$.pipe(mapTo(false)))),\n            map(e => (((e as Coord).event = e), e as Coord))\n          );\n\n        return merge(touchmove$, mousemove$);\n      })\n    );\n  }\n\n  getEndObservable() {\n    return combineLatest([this.$.mouseEvents]).pipe(\n      switchMap(([mouseEvents]) => {\n        const touchend$ = (<Observable<TouchEvent>>fromEvent(document, \"touchend\", { passive: true })).pipe(\n          filter(({ touches }) => touches.length === 0),\n          map(event => event.changedTouches[0] as Coord)\n        );\n\n        const mouseup$ = !mouseEvents\n          ? NEVER\n          : (<Observable<MouseEvent>>fromEvent(document, \"mouseup\", { passive: true })).pipe(\n            map(e => (((e as Coord).event = e), e as Coord)),\n          );\n\n        return merge(touchend$, mouseup$);\n      })\n    );\n  }\n\n  getIsSlidingObservable(move$: Observable<Coord>, start$: Observable<Coord>, end$: Observable<Coord>) {\n    return this.getIsSlidingObservableInner(move$, start$).pipe(\n      take(1),\n      startWith(undefined),\n      repeatWhen(() => end$)\n    );\n  }\n\n  getIsSlidingObservableInner(move$: Observable<Coord>, start$: Observable<Coord>) {\n    if (this.threshold) {\n      return move$.pipe(\n        withLatestFrom(start$),\n        skipWhile(\n          ([{ clientX, clientY }, { clientX: startX, clientY: startY }]) =>\n            abs(startY - clientY) < this.threshold && abs(startX - clientX) < this.threshold\n        ),\n        map(\n          ([{ clientX, clientY }, { clientX: startX, clientY: startY }]) =>\n            abs(startX - clientX) >= abs(startY - clientY)\n        )\n      );\n    } else {\n      return move$.pipe(\n        withLatestFrom(start$),\n        map(([{ clientX, clientY, event }, { clientX: startX, clientY: startY }]) => {\n          const isSliding = abs(startX - clientX) >= abs(startY - clientY);\n          if (this.noScroll && isSliding && event) event.preventDefault();\n          return isSliding;\n        })\n      );\n    }\n  }\n}\n","import { css } from 'lit-element';\n\nexport const styles = css`\n  @media screen {\n    :host {\n      touch-action: pan-x;\n    }\n\n    .full-screen {\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 100vh;\n      width: 100vw;\n    }\n\n    .full-height {\n      position: fixed;\n      top: 0;\n      height: 100vh;\n    }\n\n    .peek {\n      left: 0;\n      width: var(--hy-drawer-peek-width, 0px);\n      visibility: hidden;\n      z-index: calc(var(--hy-drawer-z-index, 100) - 1);\n    }\n\n    .scrim {\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 10vh;\n      width: 10vw;\n      transform: scale(10);\n      transform-origin: top left;\n      opacity: 0;\n      pointer-events: none;\n      background: var(--hy-drawer-scrim-background, rgba(0, 0, 0, 0.5));\n      z-index: var(--hy-drawer-z-index, 100);\n      -webkit-tap-highlight-color: transparent;\n    }\n\n    .range {\n      position: fixed;\n      top: 0;\n      height: 100vh;\n      z-index: calc(var(--hy-drawer-z-index, 100) + 1);\n    }\n\n    .grabbing-screen {\n      cursor: grabbing;\n      z-index: calc(var(--hy-drawer-z-index, 100) + 2);\n    }\n\n    .wrapper {\n      width: var(--hy-drawer-width, 300px);\n      background: var(--hy-drawer-background, inherit);\n      box-shadow: var(--hy-drawer-box-shadow, 0 0 15px rgba(0, 0, 0, 0.25));\n      z-index: calc(var(--hy-drawer-z-index, 100) + 3);\n      contain: strict;\n    }\n\n    .wrapper.left {\n      left:  calc(-1 * var(--hy-drawer-width, 300px) + var(--hy-drawer-peek-width, 0px));\n    }\n\n    .wrapper.right {\n      right:  calc(-1 * var(--hy-drawer-width, 300px) + var(--hy-drawer-peek-width, 0px));\n    }\n\n    .wrapper > .overflow {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      overflow-x: hidden;\n      overflow-y: auto;\n      overscroll-behavior: contain;\n      -webkit-overflow-scrolling: touch;\n    }\n\n    .grab {\n      cursor: move;\n      cursor: grab;\n    }\n\n    .grabbing {\n      cursor: grabbing;\n    }\n  }\n\n  @media print {\n    .scrim {\n      display: none !important;\n    }\n\n    .wrapper {\n      transform: none !important;\n    }\n  }\n`;","export type CallbackValue = { translateX: number, opacity: number };\n\nexport class UpdateMixin {\n  contentEl!: HTMLElement;\n  scrimEl!: HTMLElement;\n\n  translateX!: number;\n  side!: string;\n  opacity!: number;\n\n  updater!: DOMUpdater;\n\n  updateDOM(translateX: number, drawerWidth: number) {\n    const inv = this.side === \"left\" ? 1 : -1;\n    const opacity = (translateX / drawerWidth) * inv || 0;\n\n    this.translateX = translateX;\n    this.opacity = opacity;\n\n    this.updater.updateDOM(translateX, opacity);\n  }\n}\n\nexport abstract class DOMUpdater {\n  static getUpdaterForPlatform(parent: UpdateMixin) {\n    const hasCSSOM = \"attributeStyleMap\" in Element.prototype && \"CSS\" in window && \"number\" in CSS;\n    return hasCSSOM\n      ? new AttributeStyleMapUpdater(parent)\n      : new StyleUpdater(parent);\n  }\n\n  private parent: UpdateMixin;\n  constructor(parent: UpdateMixin) {\n    this.parent = parent;\n  }\n  get contentEl() { return this.parent.contentEl }\n  get scrimEl() { return this.parent.scrimEl }\n\n  abstract updateDOM(translateX: number, opacity: number): void;\n}\n\nexport class StyleUpdater extends DOMUpdater {\n  constructor(parent: UpdateMixin) { super(parent); }\n\n  updateDOM(translateX: number, opacity: number) {\n    this.contentEl.style.transform = `translate(${translateX}px, 0px)`;\n    this.scrimEl.style.opacity = `${opacity}`;\n  }\n}\n\nexport class AttributeStyleMapUpdater extends DOMUpdater {\n  private tvalue: CSSTransformValue;\n  private ovalue: CSSUnitValue;\n\n  constructor(parent: UpdateMixin) {\n    super(parent);\n    this.tvalue = new CSSTransformValue([new CSSTranslate(CSS.px(0), CSS.px(0))]);\n    this.ovalue = CSS.number(1);\n  }\n\n  updateDOM(translateX: number, opacity: number) {\n    ((this.tvalue[0] as CSSTranslate).x as CSSUnitValue).value = translateX;\n    this.ovalue.value = opacity;\n\n    this.contentEl.attributeStyleMap.set(\"transform\", this.tvalue);\n    this.scrimEl.attributeStyleMap.set(\"opacity\", this.ovalue);\n  }\n}","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {AttributePart, directive, Part, PropertyPart} from '../lit-html.js';\n\n// IE11 doesn't support classList on SVG elements, so we emulate it with a Set\nclass ClassList {\n  element: Element;\n  classes: Set<string> = new Set();\n  changed = false;\n\n  constructor(element: Element) {\n    this.element = element;\n    const classList = (element.getAttribute('class') || '').split(/\\s+/);\n    for (const cls of classList) {\n      this.classes.add(cls);\n    }\n  }\n  add(cls: string) {\n    this.classes.add(cls);\n    this.changed = true;\n  }\n\n  remove(cls: string) {\n    this.classes.delete(cls);\n    this.changed = true;\n  }\n\n  commit() {\n    if (this.changed) {\n      let classString = '';\n      this.classes.forEach((cls) => classString += cls + ' ');\n      this.element.setAttribute('class', classString);\n    }\n  }\n}\n\nexport interface ClassInfo {\n  readonly [name: string]: string|boolean|number;\n}\n\n/**\n * Stores the ClassInfo object applied to a given AttributePart.\n * Used to unset existing values when a new ClassInfo object is applied.\n */\nconst previousClassesCache = new WeakMap<Part, Set<string>>();\n\n/**\n * A directive that applies CSS classes. This must be used in the `class`\n * attribute and must be the only part used in the attribute. It takes each\n * property in the `classInfo` argument and adds the property name to the\n * element's `class` if the property value is truthy; if the property value is\n * falsey, the property name is removed from the element's `class`. For example\n * `{foo: bar}` applies the class `foo` if the value of `bar` is truthy.\n * @param classInfo {ClassInfo}\n */\nexport const classMap = directive((classInfo: ClassInfo) => (part: Part) => {\n  if (!(part instanceof AttributePart) || (part instanceof PropertyPart) ||\n      part.committer.name !== 'class' || part.committer.parts.length > 1) {\n    throw new Error(\n        'The `classMap` directive must be used in the `class` attribute ' +\n        'and must be the only part in the attribute.');\n  }\n\n  const {committer} = part;\n  const {element} = committer;\n\n  let previousClasses = previousClassesCache.get(part);\n  if (previousClasses === undefined) {\n    // Write static classes once\n    // Use setAttribute() because className isn't a string on SVG elements\n    element.setAttribute('class', committer.strings.join(' '));\n    previousClassesCache.set(part, previousClasses = new Set());\n  }\n\n  const classList =\n      (element.classList || new ClassList(element)) as DOMTokenList | ClassList;\n\n  // Remove old classes that no longer apply\n  // We use forEach() instead of for-of so that re don't require down-level\n  // iteration.\n  previousClasses.forEach((name) => {\n    if (!(name in classInfo)) {\n      classList.remove(name);\n      previousClasses!.delete(name);\n    }\n  });\n\n  // Add or remove classes based on their classMap value\n  for (const name in classInfo) {\n    const value = classInfo[name];\n    if (value != previousClasses.has(name)) {\n      // We explicitly want a loose truthy check of `value` because it seems\n      // more convenient that '' and 0 are skipped.\n      if (value) {\n        classList.add(name);\n        previousClasses.add(name);\n      } else {\n        classList.remove(name);\n        previousClasses.delete(name);\n      }\n    }\n  }\n  if (typeof (classList as ClassList).commit === 'function') {\n    (classList as ClassList).commit();\n  }\n});\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {AttributePart, directive, Part, PropertyPart} from '../lit-html.js';\n\nexport interface StyleInfo {\n  readonly [name: string]: string;\n}\n\n/**\n * Stores the StyleInfo object applied to a given AttributePart.\n * Used to unset existing values when a new StyleInfo object is applied.\n */\nconst previousStylePropertyCache = new WeakMap<AttributePart, Set<string>>();\n\n/**\n * A directive that applies CSS properties to an element.\n *\n * `styleMap` can only be used in the `style` attribute and must be the only\n * expression in the attribute. It takes the property names in the `styleInfo`\n * object and adds the property values as CSS properties. Property names with\n * dashes (`-`) are assumed to be valid CSS property names and set on the\n * element's style object using `setProperty()`. Names without dashes are\n * assumed to be camelCased JavaScript property names and set on the element's\n * style object using property assignment, allowing the style object to\n * translate JavaScript-style names to CSS property names.\n *\n * For example `styleMap({backgroundColor: 'red', 'border-top': '5px', '--size':\n * '0'})` sets the `background-color`, `border-top` and `--size` properties.\n *\n * @param styleInfo {StyleInfo}\n */\nexport const styleMap = directive((styleInfo: StyleInfo) => (part: Part) => {\n  if (!(part instanceof AttributePart) || (part instanceof PropertyPart) ||\n      part.committer.name !== 'style' || part.committer.parts.length > 1) {\n    throw new Error(\n        'The `styleMap` directive must be used in the style attribute ' +\n        'and must be the only part in the attribute.');\n  }\n\n  const {committer} = part;\n  const {style} = committer.element as HTMLElement;\n\n  let previousStyleProperties = previousStylePropertyCache.get(part);\n\n  if (previousStyleProperties === undefined) {\n    // Write static styles once\n    style.cssText = committer.strings.join(' ');\n    previousStylePropertyCache.set(part, previousStyleProperties = new Set());\n  }\n\n  // Remove old properties that no longer exist in styleInfo\n  // We use forEach() instead of for-of so that re don't require down-level\n  // iteration.\n  previousStyleProperties.forEach((name) => {\n    if (!(name in styleInfo)) {\n      previousStyleProperties!.delete(name);\n      if (name.indexOf('-') === -1) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (style as any)[name] = null;\n      } else {\n        style.removeProperty(name);\n      }\n    }\n  });\n\n  // Add or update properties\n  for (const name in styleInfo) {\n    previousStyleProperties.add(name);\n    if (name.indexOf('-') === -1) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (style as any)[name] = styleInfo[name];\n    } else {\n      style.setProperty(name, styleInfo[name]);\n    }\n  }\n});\n"],"sourceRoot":""}